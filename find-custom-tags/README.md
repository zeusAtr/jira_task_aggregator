# üîç Custom Tags Scanner

–°–∫—Ä–∏–ø—Ç –¥–ª—è –ø–æ–∏—Å–∫–∞ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —Ç–µ–≥–æ–≤ –≤ YAML —Ñ–∞–π–ª–∞—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π.

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–°–∫–∞–Ω–∏—Ä—É–µ—Ç –≤—Å–µ `.yml` –∏ `.yaml` —Ñ–∞–π–ª—ã –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∏ –Ω–∞—Ö–æ–¥–∏—Ç –∫–∞—Å—Ç–æ–º–Ω—ã–µ —Ç–µ–≥–∏ Docker-–æ–±—Ä–∞–∑–æ–≤ (feature/, hotfix/, release/, –∏ —Ç.–¥.), –∏—Å–∫–ª—é—á–∞—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –≤–µ—Ä—Å–∏–æ–Ω–Ω—ã–µ —Ç–µ–≥–∏ –∏ —Ö–µ—à–∏ –∫–æ–º–º–∏—Ç–æ–≤.

## ‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- ‚úÖ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç **–≤—Å–µ** .yml –∏ .yaml —Ñ–∞–π–ª—ã –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ñ–∞–π–ª—ã —Å –ª—é–±—ã–º–∏ –∏–º–µ–Ω–∞–º–∏ (prod1.yml, prodsg1.yml, docker-compose.yml, –∏ —Ç.–¥.)
- ‚úÖ –ì—Ä—É–ø–ø–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ —Ñ–∞–π–ª–∞–º
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- ‚úÖ –§–∏–ª—å—Ç—Ä—É–µ—Ç –∫–∞—Å—Ç–æ–º–Ω—ã–µ —Ç–µ–≥–∏ (—Å –ø—Ä–µ—Ñ–∏–∫—Å–∞–º–∏ feature/, hotfix/, release/, –∏ —Ç.–¥.)
- ‚úÖ –ò—Å–∫–ª—é—á–∞–µ—Ç —Å–µ—Ä–≤–∏—Å—ã —Å —Å—É—Ñ—Ñ–∏–∫—Å–æ–º `-limited`
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –≤ —Ñ–æ—Ä–º–∞—Ç—ã: TXT, CSV, Markdown

## üéØ –ß—Ç–æ —Å—á–∏—Ç–∞–µ—Ç—Å—è –∫–∞—Å—Ç–æ–º–Ω—ã–º —Ç–µ–≥–æ–º

### –í–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –æ—Ç—á–µ—Ç:
- `feature/new-feature`
- `hotfix/critical-fix`
- `bugfix/login-issue`
- `release/v2.0-rc1`
- `develop/experimental`
- –õ—é–±–æ–π —Ç–µ–≥ —Å–æ–¥–µ—Ä–∂–∞—â–∏–π `/` (—Å–ª–µ—à)

### –ò—Å–∫–ª—é—á–∞–µ—Ç—Å—è –∏–∑ –æ—Ç—á–µ—Ç–∞:
- `1.0.0` (–≤–µ—Ä—Å–∏–æ–Ω–Ω—ã–µ —Ç–µ–≥–∏)
- `v1.2.3` (–≤–µ—Ä—Å–∏–æ–Ω–Ω—ã–µ —Ç–µ–≥–∏ —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º v)
- `1.0.0-alpha` (–≤–µ—Ä—Å–∏–æ–Ω–Ω—ã–µ —Ç–µ–≥–∏ —Å —Å—É—Ñ—Ñ–∏–∫—Å–æ–º)
- `4fe602bc` (—Ö–µ—à–∏ –∫–æ–º–º–∏—Ç–æ–≤, 7-40 —Å–∏–º–≤–æ–ª–æ–≤ hex)
- `latest` (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ç–µ–≥–∏)
- `stable` (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ç–µ–≥–∏)
- `production` (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ç–µ–≥–∏)

## üö´ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤

–°–µ—Ä–≤–∏—Å—ã —Å —Å—É—Ñ—Ñ–∏–∫—Å–æ–º `-limited` **–ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–∫–ª—é—á–∞—é—Ç—Å—è** –∏–∑ –æ—Ç—á–µ—Ç–∞:
- ‚ùå `api-service-limited`
- ‚ùå `worker-limited`
- ‚ùå `backend-limited`

## üì¶ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.6+
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (re, argparse, pathlib)

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```bash
# –°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—É—â—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
./find_custom_tags_grouped.py .

# –°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
./find_custom_tags_grouped.py /path/to/configs
```

### –≠–∫—Å–ø–æ—Ä—Ç –≤ —Ñ–∞–π–ª

```bash
# –≠–∫—Å–ø–æ—Ä—Ç –≤ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç
./find_custom_tags_grouped.py /path/to/configs -o report.txt

# –≠–∫—Å–ø–æ—Ä—Ç –≤ CSV
./find_custom_tags_grouped.py /path/to/configs -o report.csv -f csv

# –≠–∫—Å–ø–æ—Ä—Ç –≤ Markdown
./find_custom_tags_grouped.py /path/to/configs -o report.md -f md
```

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏

```bash
# –¢–æ–ª—å–∫–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ —Ñ–∞–π–ª, –±–µ–∑ –≤—ã–≤–æ–¥–∞ –Ω–∞ —ç–∫—Ä–∞–Ω
./find_custom_tags_grouped.py /path/to/configs -o report.txt -q
```

## üìä –§–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞

### –ö–æ–Ω—Å–æ–ª—å–Ω—ã–π –≤—ã–≤–æ–¥ (—Ç–µ–∫—Å—Ç)

```
path: prod1
  service: api-service
  tag: feature/new-api
  service: web-service
  tag: hotfix/login-fix

path: prodsg1
  service: backend
  tag: release/v2.0-rc

–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
  –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ —Ñ–∞–π–ª–æ–≤: 5
  –§–∞–π–ª–æ–≤ —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ —Ç–µ–≥–∞–º–∏: 2
  –í—Å–µ–≥–æ –Ω–∞–π–¥–µ–Ω–æ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —Ç–µ–≥–æ–≤: 3
```

### CSV —Ñ–æ—Ä–º–∞—Ç

```csv
path,service,tag
prod1,api-service,feature/new-api
prod1,web-service,hotfix/login-fix
prodsg1,backend,release/v2.0-rc
```

### Markdown —Ñ–æ—Ä–º–∞—Ç

```markdown
# –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Ç–µ–≥–∏

## prod1

| Service | Tag |
|---------|-----|
| `api-service` | `feature/new-api` |
| `web-service` | `hotfix/login-fix` |

## prodsg1

| Service | Tag |
|---------|-----|
| `backend` | `release/v2.0-rc` |

## –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- **–û–±—Ä–∞–±–æ—Ç–∞–Ω–æ —Ñ–∞–π–ª–æ–≤:** 5
- **–§–∞–π–ª–æ–≤ —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ —Ç–µ–≥–∞–º–∏:** 2
- **–í—Å–µ–≥–æ –Ω–∞–π–¥–µ–Ω–æ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —Ç–µ–≥–æ–≤:** 3
```

## üîß –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| `path` | –ü—É—Ç—å –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å yml/yaml —Ñ–∞–π–ª–∞–º–∏ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π) |
| `-o, --output` | –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ—Ç—á–µ—Ç –≤ —Ñ–∞–π–ª |
| `-f, --format` | –§–æ—Ä–º–∞—Ç –≤—ã—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞: txt, csv, md (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: txt) |
| `-q, --quiet` | –ù–µ –≤—ã–≤–æ–¥–∏—Ç—å –æ—Ç—á–µ—Ç –Ω–∞ —ç–∫—Ä–∞–Ω (—Ç–æ–ª—å–∫–æ –≤ —Ñ–∞–π–ª) |
| `-h, --help` | –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É |

## üí° –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
```bash
./find_custom_tags_grouped.py /srv/deployments
```

### –ü—Ä–∏–º–µ—Ä 2: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞ –¥–ª—è –∫–æ–º–∞–Ω–¥—ã
```bash
./find_custom_tags_grouped.py /srv/deployments -o custom_tags_report.md -f md
```

### –ü—Ä–∏–º–µ—Ä 3: –≠–∫—Å–ø–æ—Ä—Ç –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤ Excel
```bash
./find_custom_tags_grouped.py /srv/deployments -o tags.csv -f csv
```

### –ü—Ä–∏–º–µ—Ä 4: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –≤ CI/CD
```bash
./find_custom_tags_grouped.py /srv/deployments -o report.txt -q
if [ $? -eq 0 ]; then
    echo "–û—Ç—á–µ—Ç —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ"
    cat report.txt
fi
```

## üìù –°—Ç—Ä—É–∫—Ç—É—Ä–∞ YAML —Ñ–∞–π–ª–æ–≤

–°–∫—Ä–∏–ø—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Ñ–æ—Ä–º–∞—Ç–∞–º–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤:

### –§–æ—Ä–º–∞—Ç 1: Docker Compose
```yaml
services:
  api-service:
    image: registry.example.com/api
    tag: feature/new-endpoint
```

### –§–æ—Ä–º–∞—Ç 2: Kubernetes-style
```yaml
- name: web-service
  image: registry.example.com/web
  tag: hotfix/security-patch
```

### –§–æ—Ä–º–∞—Ç 3: Custom format
```yaml
my-service:
  container:
    image: registry.example.com/app
    tag: release/v1.5-candidate
```

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. –°–∫—Ä–∏–ø—Ç –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç, —á—Ç–æ –∏–º—è —Å–µ—Ä–≤–∏—Å–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–µ—Ä–µ–¥ —Ç–µ–≥–æ–º –≤ —Ñ–∞–π–ª–µ
2. –í–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å YAML —Å—Ç—Ä—É–∫—Ç—É—Ä –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∞ (–≥–ª—É–±–∏–Ω–∞ –æ—Ç—Å—Ç—É–ø–∞ <= 4 –ø—Ä–æ–±–µ–ª–∞ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞)
3. –ù–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

Free to use and modify

## üë§ –ê–≤—Ç–æ—Ä

Created for infrastructure automation and monitoring
